global:
  sql_adapter: "default"

default: &default
  exclude: &exclude
    - '.git/'
    - '.gitignore'
    - '.sass-cache/'
    - 'node_modules/'
    - 'bin/'
    - 'tmp/*'
    - 'Gemfile*'
    - 'Movefile'
    - 'movefile'
    - 'movefile.yml'
    - 'movefile.yaml'
    - 'wp-config.php'
    - 'wp-content/*.sql'
    - 'wp-content/*.sql.gz'
    - '*.orig'


local:
  vhost: <%= ENV['WP_HOME'] %>
  wordpress_path: "<%= ENV['PWD'] %>/www"

  database:
    name: <%= ENV['DB_NAME'] %>
    user: <%= ENV['DB_USER'] %>
    password: <%= ENV['DB_PASSWORD'] %>
    host: "0.0.0.0"
    port: <%= ENV['DB_PORT'] %>

  exclude:
    <<: *exclude


staging:
  vhost: <%= ENV['STAGE_URL'] %>
  wordpress_path: "/srv/users/<%= ENV['STAGE_USERNAME'] %>/apps/<%= ENV['STAGE_APP'] %>/public" # ServerPilot convention

  ssh:
    host: <%= ENV['STAGE_HOST'] %>
    user: <%= ENV['STAGE_USERNAME'] %>
    password: <%= ENV['STAGE_PASSWORD'] %>
    rsync_options: "--verbose"

  database:
    name: <%= ENV['STAGE_DB_NAME'] %>
    user: <%= ENV['STAGE_DB_USER'] %>
    password: <%= ENV['STAGE_DB_PW'] %>
    host: <%= ENV['STAGE_HOST'] %>

  exclude:
    <<: *exclude


production:
  vhost: <%= ENV['PROD_URL'] %>
  wordpress_path: "/srv/users/<%= ENV['PROD_USERNAME'] %>/apps/<%= ENV['PROD_APP'] %>/public" # ServerPilot convention

  ssh:
    host: <%= ENV['PROD_HOST'] %>
    user: <%= ENV['PROD_USERNAME'] %>
    password: <%= ENV['PROD_PASSWORD'] %>
    rsync_options: "--verbose"

  database:
    name: <%= ENV['PROD_DB_NAME'] %>
    user: <%= ENV['PROD_DB_USER'] %>
    password: <%= ENV['PROD_DB_PW'] %>
    host: <%= ENV['PROD_HOST'] %>

  exclude:
    <<: *exclude

  # Uncommend after launch?
  # forbid:
  #   push:
  #     db: false
  #     plugins: false
  #     languages: false
  #     uploads: false
  #     mu-plugins: false
